<div class="posts-container">
  {{ $.Scratch.Set "recentPosts" .Site.Pages }}

  {{ with .Site.Params.postAmount.sidebar }}
  {{ $.Scratch.Set "postLimit" . }}
  {{ else }}
  {{ $.Scratch.Set "postLimit" 5 }}
  {{ end }}

  {{ range first ($.Scratch.Get "postLimit") (where ($.Scratch.Get "recentPosts") "Type" "post") }}
  <article class="mini-post">
    <header>
      <h3>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </h3>
      {{ $.Scratch.Set "dateType" .Date }}
      <time class="published" datetime='{{ ($.Scratch.Get "dateType").Format "2006-01-02" }}'>
        {{ ($.Scratch.Get "dateType").Format "January 2, 2006" }}
      </time>
    </header>
    {{ .Render "featured" }}
  </article>
  {{ end }}
</div>
